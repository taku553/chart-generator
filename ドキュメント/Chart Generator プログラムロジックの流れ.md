# Chart Generator プログラムロジックの流れ

このドキュメントでは、Chart Generator ウェブアプリケーションがどのように動作し、データからグラフを生成するかの内部的なロジックを平易な言葉で説明します。

## 1. アプリケーションの全体構造 (`App.jsx`)

アプリケーションの中心は`App.jsx`というファイルです。これは、ウェブページの「司令塔」のような役割を果たします。主な仕事は以下の通りです。

*   **状態管理**: 今、ファイルがアップロードされているか、どの種類のグラフが表示されているか、といったアプリケーション全体の状況（「状態」と呼びます）を管理します。
*   **画面の切り替え**: データがまだアップロードされていない場合は「ファイルアップロード画面」を表示し、データが読み込まれたら「グラフ表示画面」に切り替えます。
*   **データと機能の連携**: ファイルアップロード画面からデータを受け取り、それをグラフ表示画面に渡す役割を担います。

## 2. ファイルアップロードとデータ処理 (`FileUpload.jsx` と `dataUtils.js`)

### 2.1. ファイルの選択と検証 (`FileUpload.jsx`)

ユーザーがファイルをアップロードする際、`FileUpload.jsx`コンポーネントが以下の処理を行います。

*   **ファイル入力の受付**: ファイルをドラッグ＆ドロップしたり、「ファイルを選択」ボタンをクリックしたりする操作を受け付けます。
*   **ファイル形式のチェック**: アップロードされたファイルがCSV形式かExcel形式であるかを確認します。もし対応していない形式であれば、エラーメッセージを表示します。
*   **データの解析指示**: ファイルが有効であれば、次に`dataUtils.js`という別のファイルにある`parseCSVFile`という機能を使って、ファイルの中身を読み込み、コンピューターが扱いやすい形に変換するよう指示します。

### 2.2. データの解析と整形 (`dataUtils.js`)

`dataUtils.js`は、データ処理専門の「道具箱」のようなものです。`FileUpload.jsx`からの指示を受けて、以下の処理を行います。

*   **CSVファイルの解析**: `papaparse`というライブラリを使って、CSVファイルの中身を読み込み、行と列に分かれたデータ（表形式のデータ）に変換します。このとき、1行目を「ヘッダー」（列の名前）として認識します。
*   **データ列の確認**: グラフを作成するために、最低2つのデータ列（X軸とY軸）があるかを確認します。
*   **データ型の推定**: 各列のデータが「数値」なのか「文字」（カテゴリ）なのかを自動的に判断します。これにより、グラフの種類や表示方法を適切に選ぶことができます。
*   **グラフ用データへの変換**: ユーザーがX軸とY軸に使う列を選んだ後、その選択に基づいてデータをグラフ描画ライブラリ（Chart.js）が理解できる形式に変換します。円グラフの場合は、データを集計する特別な処理も行います。

## 3. グラフの表示と操作 (`ChartDisplay.jsx`)

データが準備されると、`ChartDisplay.jsx`コンポーネントがグラフの表示と操作を担当します。

*   **グラフの描画**: `Chart.js`という強力なグラフ描画ライブラリを使って、受け取ったデータに基づいて棒グラフ、折れ線グラフ、円グラフを描画します。モノクロを基調としたスタイリッシュなデザインが適用されます。
*   **グラフ種類の切り替え**: ユーザーがボタンをクリックすることで、棒グラフ、折れ線グラフ、円グラフの間で表示を切り替えることができます。
*   **グラフのダウンロード**: 表示されているグラフを画像ファイル（PNG形式）としてダウンロードする機能を提供します。
*   **データサマリーの表示**: グラフのデータ数、最大値、最小値、平均値といった基本的な統計情報を表示し、データの概要を分かりやすく伝えます。

## 4. デザインとアニメーション (`App.css`)

`App.css`ファイルには、ウェブページ全体の見た目と動きに関する指示が書かれています。

*   **ミニマルデザイン**: モノクロを基調としたシンプルで洗練されたデザインを定義しています。
*   **グラスモーフィズム**: カードやボタンがガラスのような透明感を持つように見せる「グラスモーフィズム」というデザイン効果を適用しています。
*   **アニメーション**: ボタンをクリックしたときや、新しい情報が表示されたときに、滑らかな動きや光沢感のあるアニメーションが再生されるように設定されています。これにより、ユーザー体験が向上します。

## 5. デプロイ

アプリケーションが完成したら、インターネット上で公開するために「デプロイ」という作業を行います。このプロセスでは、アプリケーションのコードがウェブサーバーに配置され、誰でもアクセスできるようになります。

---

このように、Chart Generatorは、いくつかの専門的な役割を持つ部分が協力し合うことで、ユーザーが簡単に統計データを美しいグラフに変換できる仕組みになっています。
