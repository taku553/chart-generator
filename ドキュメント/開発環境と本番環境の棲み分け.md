# é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã®æ£²ã¿åˆ†ã‘ã‚¬ã‚¤ãƒ‰

## é‡è¦ãªå‰æçŸ¥è­˜

### ãƒ†ã‚¹ãƒˆç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã¯å®Œå…¨ã«åˆ¥ç‰©

Stripeã«ã¯ã€Œãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã€ã¨ã€Œæœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã€ã®2ã¤ã®ç’°å¢ƒãŒã‚ã‚Šã€**ã“ã‚Œã‚‰ã¯å®Œå…¨ã«ç‹¬ç«‹**ã—ã¦ã„ã¾ã™ï¼š

| é …ç›® | ãƒ†ã‚¹ãƒˆç’°å¢ƒ | æœ¬ç•ªç’°å¢ƒ |
|------|-----------|---------|
| APIã‚­ãƒ¼ | `sk_test_xxx` | `sk_live_xxx` |
| å•†å“ID | `prod_Tce...` | `prod_xxx...` (ç•°ãªã‚‹ID) |
| ä¾¡æ ¼ID | `price_1Sf...` | `price_1xx...` (ç•°ãªã‚‹ID) |
| é¡§å®¢ãƒ‡ãƒ¼ã‚¿ | ãƒ†ã‚¹ãƒˆç”¨ã®æ¶ç©ºãƒ‡ãƒ¼ã‚¿ | å®Ÿéš›ã®é¡§å®¢ãƒ‡ãƒ¼ã‚¿ |
| æ±ºæ¸ˆ | å®Ÿéš›ã®èª²é‡‘ãªã— | å®Ÿéš›ã®èª²é‡‘ã‚ã‚Š |
| Webhook | åˆ¥URL | åˆ¥URL |

### Firebase/Firestoreã‚‚åŒæ§˜

Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚‚é€šå¸¸ã€é–‹ç™ºç”¨ã¨æœ¬ç•ªç”¨ã‚’åˆ†ã‘ã¾ã™ï¼š

- **é–‹ç™ºç”¨**: `grafico-4dea6` (ãƒ†ã‚¹ãƒˆç’°å¢ƒã®Stripeã¨é€£æº)
- **æœ¬ç•ªç”¨**: `grafico-production` (æœ¬ç•ªç’°å¢ƒã®Stripeã¨é€£æº)

---

## ã‚ãªãŸã®è³ªå•ã¸ã®å›ç­”

### Q: æœ¬ç•ªç’°å¢ƒã§ã¯æœªç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãªã‚‹ã®ã‹ï¼Ÿ

**A: ã¯ã„ã€ãã®é€šã‚Šã§ã™ã€‚**

ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ä»¥ä¸‹ã®çŠ¶æ…‹ã ã£ãŸã¨ã—ã¾ã™ï¼š

```
ãƒ†ã‚¹ãƒˆç’°å¢ƒã®Firestore
users/
  your-uid-123/
    email: "dev@example.com"
    plan: "pro"
    stripeId: "cus_test_xxxxx"
```

æœ¬ç•ªç’°å¢ƒã«ç§»è¡Œã™ã‚‹ã¨ï¼š

```
æœ¬ç•ªç’°å¢ƒã®Firestore
users/
  your-uid-123/
    email: "dev@example.com"
    plan: "free"  â† ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã‚‹
    stripeId: ãªã— â† æœ¬ç•ªç’°å¢ƒã§ã¯æ±ºæ¸ˆã—ã¦ã„ãªã„ãŸã‚
```

**ç†ç”±:**
- Stripeã®ãƒ†ã‚¹ãƒˆç’°å¢ƒã®é¡§å®¢æƒ…å ±ã¯æœ¬ç•ªç’°å¢ƒã«å¼•ãç¶™ãŒã‚Œãªã„
- Firebase Extensionã¯æœ¬ç•ªç’°å¢ƒã®Stripeé¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹
- ãƒ†ã‚¹ãƒˆç’°å¢ƒã§èª²é‡‘ã—ã¦ã„ã¦ã‚‚ã€æœ¬ç•ªç’°å¢ƒã§ã¯ã€Œæœªç™»éŒ²ã€æ‰±ã„

---

## é–‹ç™ºè€…ã¨ã—ã¦ã®æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

é–‹ç™ºè€…ãŒAIã‚¤ãƒ³ã‚µã‚¤ãƒˆãªã©ã®æœ‰æ–™æ©Ÿèƒ½ã‚’åˆ¶é™ãªãä½¿ã†ã«ã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

### æ–¹æ³•1: é–‹ç™ºè€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ç›´æ¥ãƒ­ãƒ¼ãƒ«ã‚’ä»˜ä¸ï¼ˆæ¨å¥¨ï¼‰

Firestoreã§é–‹ç™ºè€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ç›´æ¥ `pro` ãƒ—ãƒ©ãƒ³ã‚’ä»˜ä¸ã—ã¾ã™ã€‚Stripeã‚’çµŒç”±ã›ãšã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ã§æ¨©é™ã‚’è¨­å®šã—ã¾ã™ã€‚

#### å®Ÿè£…æ–¹æ³•

**1. Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§æ‰‹å‹•è¨­å®š**

1. Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ã: https://console.firebase.google.com/
2. Firestore Databaseã«ç§»å‹•
3. `users` ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰è‡ªåˆ†ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ¢ã™
4. ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç·¨é›†:

```javascript
{
  email: "your-email@gmail.com",
  plan: "pro",  // â† "free" ã‹ã‚‰ "pro" ã«å¤‰æ›´
  isDeveloper: true,  // â† è¿½åŠ ï¼ˆé–‹ç™ºè€…ãƒ•ãƒ©ã‚°ï¼‰
  // Stripeé–¢é€£ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ä¸è¦
}
```

**2. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è‡ªå‹•è¨­å®š**

[scripts/set-developer-role.js](scripts/set-developer-role.js) ã‚’ä½œæˆ:

```javascript
import admin from 'firebase-admin';

admin.initializeApp({
  projectId: 'grafico-4dea6',
});

const db = admin.firestore();

// é–‹ç™ºè€…ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨­å®š
const DEVELOPER_EMAILS = [
  'your-primary@gmail.com',
  'your-secondary@gmail.com',
];

async function setDeveloperRole() {
  console.log('ğŸ”§ é–‹ç™ºè€…ãƒ­ãƒ¼ãƒ«ã‚’è¨­å®šä¸­...\n');

  for (const email of DEVELOPER_EMAILS) {
    try {
      // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢
      const usersSnapshot = await db
        .collection('users')
        .where('email', '==', email)
        .get();

      if (usersSnapshot.empty) {
        console.log(`âš ï¸  ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${email}`);
        continue;
      }

      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°
      const userDoc = usersSnapshot.docs[0];
      await userDoc.ref.update({
        plan: 'pro',
        isDeveloper: true,
        updatedAt: new Date().toISOString(),
      });

      console.log(`âœ… é–‹ç™ºè€…ãƒ­ãƒ¼ãƒ«ã‚’è¨­å®š: ${email}`);
    } catch (error) {
      console.error(`âŒ ã‚¨ãƒ©ãƒ¼ (${email}):`, error.message);
    }
  }

  console.log('\nâœ¨ å®Œäº†ï¼');
  process.exit(0);
}

setDeveloperRole();
```

å®Ÿè¡Œ:

```bash
node scripts/set-developer-role.js
```

**3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«è‡ªå‹•è¨­å®šï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰**

[src/contexts/AuthContext.jsx](src/contexts/AuthContext.jsx) ã«é–‹ç™ºè€…ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ :

```javascript
// é–‹ç™ºè€…ãƒªã‚¹ãƒˆï¼ˆç’°å¢ƒå¤‰æ•°ã§ç®¡ç†ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ï¼‰
const DEVELOPER_EMAILS = [
  'your-primary@gmail.com',
  'your-secondary@gmail.com',
];

const saveUserToFirestore = async (firebaseUser) => {
  const userRef = doc(db, 'users', firebaseUser.uid);
  const userSnap = await getDoc(userRef);

  // é–‹ç™ºè€…ã‹ã©ã†ã‹ãƒã‚§ãƒƒã‚¯
  const isDeveloper = DEVELOPER_EMAILS.includes(firebaseUser.email);

  if (!userSnap.exists()) {
    // æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å ´åˆ
    await setDoc(userRef, {
      uid: firebaseUser.uid,
      email: firebaseUser.email,
      displayName: firebaseUser.displayName || null,
      photoURL: firebaseUser.photoURL || null,
      plan: isDeveloper ? 'pro' : 'free', // é–‹ç™ºè€…ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§pro
      isDeveloper: isDeveloper,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    });
  } else if (isDeveloper && userSnap.data().plan !== 'pro') {
    // æ—¢å­˜ã®é–‹ç™ºè€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’proã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
    await setDoc(userRef, {
      plan: 'pro',
      isDeveloper: true,
      updatedAt: new Date().toISOString(),
    }, { merge: true });
  }
};
```

---

### æ–¹æ³•2: ç’°å¢ƒå¤‰æ•°ã§é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–

`.env.local` ã«é–‹ç™ºè€…ãƒ•ãƒ©ã‚°ã‚’è¨­å®šã—ã€é–‹ç™ºæ™‚ã¯å…¨ã¦ã®åˆ¶é™ã‚’ç„¡è¦–ã—ã¾ã™ã€‚

```bash
# .env.local
VITE_DEVELOPER_MODE=true
VITE_DEVELOPER_EMAILS=your-email1@gmail.com,your-email2@gmail.com
```

[src/components/ChartInsights.jsx](src/components/ChartInsights.jsx) ã§ä½¿ç”¨:

```javascript
const isDeveloper = 
  import.meta.env.VITE_DEVELOPER_MODE === 'true' &&
  import.meta.env.VITE_DEVELOPER_EMAILS?.split(',').includes(user?.email);

// AIã‚¤ãƒ³ã‚µã‚¤ãƒˆã®åˆ¶é™ãƒã‚§ãƒƒã‚¯
const canUseInsights = 
  isDeveloper || // é–‹ç™ºè€…ã¯ç„¡åˆ¶é™
  userPlan === 'pro' || // Proãƒ—ãƒ©ãƒ³ã¯ç„¡åˆ¶é™
  (userPlan === 'standard' && monthlyInsightsCount < 50) || // Standard ã¯50å›ã¾ã§
  (!userPlan && freeInsightsCount < 3); // Free ã¯3å›ã¾ã§
```

---

### æ–¹æ³•3: Stripeã®ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã‚’ç¶™ç¶šä½¿ç”¨

æœ¬ç•ªç’°å¢ƒãƒªãƒªãƒ¼ã‚¹å¾Œã‚‚ã€é–‹ç™º/ãƒ†ã‚¹ãƒˆç”¨ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®ã¾ã¾ã«ã—ã¾ã™ã€‚

**æ£²ã¿åˆ†ã‘ã®ä¾‹:**

| ç’°å¢ƒ | ç”¨é€” | Stripeãƒ¢ãƒ¼ãƒ‰ | Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
|------|------|-------------|-------------------|
| é–‹ç™º | æ©Ÿèƒ½é–‹ç™ºãƒ»å‹•ä½œç¢ºèª | ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ | grafico-4dea6 (dev) |
| æœ¬ç•ª | å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ | æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ | grafico-production |

**ãƒ¡ãƒªãƒƒãƒˆ:**
- é–‹ç™ºç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã¯å®Ÿéš›ã®èª²é‡‘ãŒç™ºç”Ÿã—ãªã„
- AIã‚¤ãƒ³ã‚µã‚¤ãƒˆãªã©åˆ¶é™ãªãä½¿ãˆã‚‹
- æœ¬ç•ªç’°å¢ƒã«å½±éŸ¿ã‚’ä¸ãˆãªã„

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- 2ã¤ã®ç’°å¢ƒã‚’ç¶­æŒã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèªã¯åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå¿…è¦

---

## æ¨å¥¨ã™ã‚‹ç’°å¢ƒæ§‹æˆ

### é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º

```
é–‹ç™ºç’°å¢ƒ
â”œâ”€â”€ Firebase: grafico-4dea6 (dev)
â”œâ”€â”€ Stripe: ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰
â””â”€â”€ é–‹ç™ºè€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ: Proãƒ—ãƒ©ãƒ³ (ãƒ†ã‚¹ãƒˆèª²é‡‘)
```

### æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹å¾Œ

```
æœ¬ç•ªç’°å¢ƒ
â”œâ”€â”€ Firebase: grafico-production
â”œâ”€â”€ Stripe: æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰
â””â”€â”€ å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼: å®Ÿèª²é‡‘

é–‹ç™º/ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒï¼ˆç¶™ç¶šï¼‰
â”œâ”€â”€ Firebase: grafico-4dea6 (dev)
â”œâ”€â”€ Stripe: ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰
â””â”€â”€ é–‹ç™ºè€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ: Proãƒ—ãƒ©ãƒ³ (ãƒ†ã‚¹ãƒˆèª²é‡‘)
    â””â”€â”€ ã¾ãŸã¯Firestoreã§ç›´æ¥proä»˜ä¸
```

---

## å…·ä½“çš„ãªå®Ÿè£…ãƒ—ãƒ©ãƒ³

### ã‚¹ãƒ†ãƒƒãƒ—1: é–‹ç™ºè€…åˆ¤å®šæ©Ÿèƒ½ã‚’è¿½åŠ 

```javascript
// src/lib/developerUtils.js
export const DEVELOPER_EMAILS = [
  'your-primary@gmail.com',
  'your-secondary@gmail.com',
];

export const isDeveloper = (email) => {
  return DEVELOPER_EMAILS.includes(email);
};

export const getDeveloperPlan = (email) => {
  return isDeveloper(email) ? 'pro' : null;
};
```

### ã‚¹ãƒ†ãƒƒãƒ—2: AuthContextã«çµ±åˆ

```javascript
// src/contexts/AuthContext.jsx
import { isDeveloper, getDeveloperPlan } from '@/lib/developerUtils';

const saveUserToFirestore = async (firebaseUser) => {
  const userRef = doc(db, 'users', firebaseUser.uid);
  const userSnap = await getDoc(userRef);

  const devPlan = getDeveloperPlan(firebaseUser.email);

  if (!userSnap.exists()) {
    await setDoc(userRef, {
      uid: firebaseUser.uid,
      email: firebaseUser.email,
      displayName: firebaseUser.displayName || null,
      photoURL: firebaseUser.photoURL || null,
      plan: devPlan || 'free',
      isDeveloper: !!devPlan,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    });
  } else if (devPlan && userSnap.data().plan !== 'pro') {
    // é–‹ç™ºè€…ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã‚‰è‡ªå‹•çš„ã«proã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
    await setDoc(userRef, {
      plan: 'pro',
      isDeveloper: true,
      updatedAt: new Date().toISOString(),
    }, { merge: true });
  }
};
```

### ã‚¹ãƒ†ãƒƒãƒ—3: AIã‚¤ãƒ³ã‚µã‚¤ãƒˆã§é–‹ç™ºè€…ãƒã‚§ãƒƒã‚¯

```javascript
// src/components/ChartInsights.jsx
import { isDeveloper } from '@/lib/developerUtils';

const ChartInsights = ({ data, onBack }) => {
  const { user } = useAuth();
  const userPlan = user?.plan || 'free';
  const isDevUser = isDeveloper(user?.email);

  const canUseInsights = 
    isDevUser || // é–‹ç™ºè€…ã¯ç„¡åˆ¶é™
    userPlan === 'pro' || 
    (userPlan === 'standard' && monthlyInsightsCount < 50) ||
    (!['pro', 'standard'].includes(userPlan) && freeInsightsCount < 3);

  // ...
};
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ³¨æ„ç‚¹

### æœ¬ç•ªç’°å¢ƒã§ã¯é–‹ç™ºè€…ãƒªã‚¹ãƒˆã‚’å‰Šé™¤

æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã¯ã€ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸé–‹ç™ºè€…ãƒªã‚¹ãƒˆã‚’å‰Šé™¤ã¾ãŸã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†ã—ã¾ã™ã€‚

**æ¨å¥¨: ç’°å¢ƒå¤‰æ•°ã§ã®ç®¡ç†**

```javascript
// .env.local (é–‹ç™ºç’°å¢ƒ)
VITE_DEVELOPER_EMAILS=your-email1@gmail.com,your-email2@gmail.com

// .env.production (æœ¬ç•ªç’°å¢ƒ)
VITE_DEVELOPER_EMAILS=  # ç©ºã«ã™ã‚‹ã‹å‰Šé™¤
```

```javascript
// src/lib/developerUtils.js
export const DEVELOPER_EMAILS = 
  import.meta.env.VITE_DEVELOPER_EMAILS?.split(',').filter(Boolean) || [];

export const isDeveloper = (email) => {
  if (DEVELOPER_EMAILS.length === 0) return false;
  return DEVELOPER_EMAILS.includes(email);
};
```

### Firestoreã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«

é–‹ç™ºè€…ãŒè‡ªåˆ†ã®ãƒ—ãƒ©ãƒ³ã‚’å¤‰æ›´ã§ããªã„ã‚ˆã†ã«åˆ¶é™ï¼š

```javascript
// firestore.rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read: if request.auth != null && request.auth.uid == userId;
      allow write: if request.auth != null && 
                      request.auth.uid == userId &&
                      // planãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å¤‰æ›´ã‚’ç¦æ­¢ï¼ˆStripeçµŒç”±ã®ã¿ï¼‰
                      !request.resource.data.diff(resource.data).affectedKeys().hasAny(['plan', 'stripeId']);
    }
  }
}
```

---

## ã¾ã¨ã‚

### è³ªå•ã¸ã®å›ç­”

> æœ¬ç•ªç’°å¢ƒã§ã¯è‡ªåˆ†ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æœªç™»éŒ²ã«ãªã‚‹ï¼Ÿ

**ã¯ã„ã€ãã®é€šã‚Šã§ã™ã€‚** ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã¯æœ¬ç•ªç’°å¢ƒã«ã¯å¼•ãç¶™ãŒã‚Œã¾ã›ã‚“ã€‚

### æ¨å¥¨ã•ã‚Œã‚‹å¯¾å¿œ

1. **é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã‚’åˆ†ã‘ã‚‹**
   - é–‹ç™ºç”¨Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®Stripe
   - æœ¬ç•ªç”¨Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã®Stripe

2. **é–‹ç™ºè€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã¯ç›´æ¥æ¨©é™ã‚’ä»˜ä¸**
   - Firestoreã§ç›´æ¥ `plan: 'pro'` ã‚’è¨­å®š
   - ã‚³ãƒ¼ãƒ‰å†…ã§é–‹ç™ºè€…åˆ¤å®šæ©Ÿèƒ½ã‚’å®Ÿè£…
   - ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†ã—ã¦ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¢ºä¿

3. **æœ¬ç•ªç’°å¢ƒã§ã¯é–‹ç™ºè€…ç‰¹æ¨©ã‚’ç„¡åŠ¹åŒ–**
   - ç’°å¢ƒå¤‰æ•°ã‚’ç©ºã«ã™ã‚‹
   - ã¾ãŸã¯å°‚ç”¨ã®ç®¡ç†ç”»é¢ã§è¨­å®š

ã“ã®æ–¹æ³•ãªã‚‰ã€**é–‹ç™ºè€…ã¯AIã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚’åˆ¶é™ãªãä½¿ã„ã¤ã¤ã€æœ¬ç•ªç’°å¢ƒã§ã¯é€šå¸¸ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨åŒã˜æ‰±ã„**ã«ã§ãã¾ã™ã€‚

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… [scripts/set-developer-role.js](scripts/set-developer-role.js) ã‚’ä½œæˆ
2. âœ… [src/lib/developerUtils.js](src/lib/developerUtils.js) ã‚’ä½œæˆ  
3. âœ… AuthContextã«é–‹ç™ºè€…åˆ¤å®šã‚’çµ±åˆ
4. âœ… AIã‚¤ãƒ³ã‚µã‚¤ãƒˆã§é–‹ç™ºè€…ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 
5. âœ… ç’°å¢ƒå¤‰æ•°ã§é–‹ç™ºè€…ãƒªã‚¹ãƒˆã‚’ç®¡ç†
6. âœ… æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®šã‚’æº–å‚™

å®Ÿè£…ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ã§ã‚ã‚Œã°ã€ãŠçŸ¥ã‚‰ã›ãã ã•ã„ï¼
